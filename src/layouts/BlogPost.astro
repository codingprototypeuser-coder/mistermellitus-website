---
import { Image } from 'astro:assets';
import type { CollectionEntry } from 'astro:content';
import BaseHead from '../components/BaseHead.astro';
import Footer from '../components/Footer.astro';
import FormattedDate from '../components/FormattedDate.astro';
import Header from '../components/Header.astro';
import { AUTHOR } from '../consts';

type Props = CollectionEntry<'blog'>['data'];

const { title, description, pubDate, updatedDate, heroImage } = Astro.props;
---

<html lang="de">
  <head>
    <BaseHead title={title} description={description} />
  </head>

  <body>
    <Header />

    <main class="py-8 md:py-16">
      <article class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
        <!-- Header -->
        <header class="mb-8 md:mb-12">
          <div class="flex items-center gap-4 text-sm text-[var(--text-muted)] mb-4">
            <time>
              <FormattedDate date={pubDate} />
            </time>
            {updatedDate && (
              <span class="italic">
                · Aktualisiert am <FormattedDate date={updatedDate} />
              </span>
            )}
          </div>
          <h1 class="text-3xl md:text-4xl font-bold mb-4 leading-tight">{title}</h1>
          <p class="text-lg text-[var(--text-secondary)]">{description}</p>
          <div class="w-20 h-1 bg-[var(--primary)] rounded mt-6"></div>
        </header>

        <!-- Hero Image -->
        {heroImage && (
          <div class="mb-8 md:mb-12">
            <Image
              width={800}
              height={400}
              src={heroImage}
              alt={title}
              class="w-full rounded-xl shadow-lg"
            />
          </div>
        )}

        <!-- Content -->
        <div class="prose">
          <slot />
        </div>

        <!-- Author Box -->
        <div class="mt-12 p-6 bg-[var(--bg-secondary)] rounded-xl">
          <div class="flex items-start gap-4">
            <img
              src="/images/header-bg.png"
              alt={AUTHOR.name}
              class="w-16 h-16 rounded-full object-cover"
            />
            <div>
              <p class="font-semibold text-[var(--text-primary)]">{AUTHOR.name}</p>
              <p class="text-sm text-[var(--text-muted)] mt-1">
                {AUTHOR.bio}
              </p>
            </div>
          </div>
        </div>

        <!-- Navigation -->
        <div class="mt-12 pt-8 border-t border-gray-200">
          <a
            href="/blog"
            class="inline-flex items-center gap-2 text-[var(--primary)] hover:text-[var(--primary-dark)] font-medium"
          >
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
            </svg>
            Zurück zum Blog
          </a>
        </div>
      </article>
    </main>

    <Footer />
  </body>
</html>
